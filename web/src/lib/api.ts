const API=import.meta.env.VITE_API_BASE||'http://localhost:4000';export async function getLots(p?:{near?:string;radius?:number;permit?:string}){const qs=new URLSearchParams();if(p?.near)qs.set('near',p.near);if(p?.radius)qs.set('radius',String(p.radius));if(p?.permit)qs.set('permit',p.permit);const r=await fetch(`${API}/api/lots?${qs.toString()}`);return r.json()}export async function getLot(id:string){const r=await fetch(`${API}/api/lots/${id}`);return r.json()}export async function getStalls(lotId:string){const r=await fetch(`${API}/api/lots/${lotId}/stalls?snapshot=latest`);return r.json()}export async function saveStalls(lotId:string,stalls:any[]){const r=await fetch(`${API}/api/lots/${lotId}/stalls`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(stalls)});return r.json()}